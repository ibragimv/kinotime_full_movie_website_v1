"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4380],{14380:function(e,r,n){n.r(r),n.d(r,{AddCardDrawer:function(){return z}});var t=n(47568),i=n(70655),a=n(85893),s=n(30702),d=n(90948),u=n(86886),c=n(15861),o=n(82580),l=n(74231),m=n(34730),p=n(25617),x=n(91308),b=n(5304),h=n(35151),f=n(60058),v=n(26042),g=n(69396),j=n(57333),y=n(53933),C=(0,n(12484).Q)((function(e){return(0,a.jsx)(j.HH,(0,g.Z)((0,v.Z)({},e),{customInput:y.iN}))})),Z=n(15994),N=n(3069),S=n(64635),_=n(70929),D=n(95378),k={type:m.Nk},w={cardNumber:"",expireDate:""},P=(0,d.ZP)("div")((function(){return{".card-type-icon":{marginRight:"8px",height:"100%","&:last-child":{marginRight:"0"}}}})),z=function(){var e=function(){var e=(0,p.v9)(b.Gp),r=(0,f.W7)().openAddCardConfirmationDrawer,n=(0,p.I0)(),a=function(){n((0,h.no)(!1))},s=function(){var e=(0,t.Z)((function(e){var n,t,s,d,u,c,o,l,m,p;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t=e.cardNumber,s=e.expireDate,d=e.isTrusted,[4,x.W.addLocalCard({cardNumber:t,expireDate:s,isTrusted:d})];case 1:return u=i.sent(),c=u.phoneNumber,o=u.sessionId,l=u.sessionExpiresAt,r(c,o,l,{onConfirmed:a}),null===(n=e.onAddedCard)||void 0===n||n.call(e),[3,3];case 2:return m=i.sent(),console.error("Failed to add card",m),null===(p=e.onError)||void 0===p||p.call(e,m),[3,3];case 3:return[2]}}))}));return function(r){return e.apply(this,arguments)}}();return{isOpen:e,close:a,addCard:s}}(),r=e.isOpen,n=e.close,d=e.addCard,v=(0,s.$G)("card").t;return(0,a.jsxs)(S.M,{open:r,size:"large",onClose:n,children:[(0,a.jsx)(S.J,{align:"center",children:v("add-card")}),(0,a.jsx)(o.J9,{initialStatus:k,initialValues:w,validationSchema:l.Ry({cardNumber:l.Z_().min(19,v("validation.min",{number:16})).required(v("validation.required")),expireDate:l.Z_().min(5,v("validation.min",{number:4})).max(5,v("validation.max",{number:4})).required(v("validation.required"))}),validateOnBlur:!1,onSubmit:function(){var e=(0,t.Z)((function(e,r){var n,t,a,s;return(0,i.__generator)(this,(function(i){return n=e.cardNumber,t=e.expireDate,a=r.setSubmitting,(s=r.setStatus)({type:m.iM}),n=n.replace(/\s/g,""),d({cardNumber:n,expireDate:t,isTrusted:!0,onAddedCard:function(){s({type:m.Vz}),a(!1)},onError:function(e){var r=e.message;s({type:m.MV,message:r}),a(!1)}}),[2]}))}));return function(r,n){return e.apply(this,arguments)}}(),children:function(e){var r=e.isValid,n=e.isSubmitting,t=e.status,i=e.submitCount,s=e.setStatus,d=e.handleSubmit,o=n||!r&&i>0;return(0,a.jsxs)(y.l0,{isSubmitting:n,autoComplete:"off",onSubmit:d,children:[(0,a.jsx)(Z.b,{variant:"error",onClose:function(){s(k)},children:t.type===m.MV&&t.message}),(0,a.jsxs)(u.ZP,{container:!0,spacing:1,mb:3,justifyContent:"space-between",children:[(0,a.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,a.jsxs)(P,{children:[(0,a.jsx)(D.Z,{className:"card-type-icon"}),(0,a.jsx)(_.Z,{className:"card-type-icon"})]}),(0,a.jsx)(c.Z,{as:"p",mb:2,mt:2,sx:{fontSize:{xs:18,md:20,lg:24},fontWeight:700},children:v("subtitle-uzcard")})]}),(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsx)(C,{format:"#### #### #### ####",autoFocus:!0,block:!0,type:"tel",name:"cardNumber",placeholder:v("placeholder.card-number"),mb:3})})]}),(0,a.jsx)(u.ZP,{container:!0,spacing:2,mb:5,children:(0,a.jsx)(u.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsx)(C,{block:!0,format:"##/##",type:"tel",name:"expireDate",placeholder:v("placeholder.expire-date")})})}),(0,a.jsx)(N.zx,{block:!0,disabled:o,type:"submit",variant:"primary","aria-label":v("add"),children:v("add")})]})}})]})}}}]);