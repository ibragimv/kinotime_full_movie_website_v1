"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2067],{60608:function(n,e,i){i.r(e),i.d(e,{SignInViaPhoneDrawer:function(){return S}});var t=i(85893),r=i(30702),s=i(57333),o=i(26447),a=i(82580),u=i(74231),c=i(34730),l=i(65665),d=i(81783),m=i(86152),p=i(15994),b=i(3069),g=i(64635),h=i(53933),f={type:c.Nk},v={shouldRemember:!0,phonu_number:""},S=function(){var n=(0,r.$G)("auth").t,e=(0,d.G)(),i=e.isOpen,S=e.signInViaPhone,C=e.openSmsConfirmationDrawer,w=e.handleClose,y=e.openPinConfirmationDrawer,x=e.handleOpenSignInViaCodeDrawer;return(0,t.jsxs)(g.M,{open:i,onClose:w,size:"large",children:[(0,t.jsx)(g.J,{align:"center",children:n("sign-in-drawer.title")}),(0,t.jsx)(a.J9,{initialStatus:f,initialValues:v,validationSchema:u.Ry({phone_number:u.Z_().required(n("validation.required"))}),validateOnBlur:!1,onSubmit:function(n,e){var i=n.phone_number,t=e.setStatus,r=e.setSubmitting;t({type:c.iM});var s=function(n){return n.replace(/\D/g,"").slice(0,12)}(i);S({phone_number:s,onSuccess:function(n){var e=n.verificationType,i=n.sessionId;"sms"===e?C({data:n,onSuccess:function(){},onClose:w}):"pin"===e&&y({verificationType:e,sessionId:i,onSuccess:function(n){(0,l.aC)(n)},onForgotPin:function(){C({data:n,type:"forgotPin",onSuccess:function(){},onClose:w})},onClose:w}),t({type:c.Vz}),r(!1)},onError:function(n){var e=n.message;t({type:c.MV,message:e}),r(!1)}})},children:function(e){var i=e.isValid,r=e.isSubmitting,a=e.status,u=(e.values,e.submitCount),l=e.setStatus,d=e.handleSubmit,g=r||!i&&u>0;return(0,t.jsxs)(h.l0,{isSubmitting:r,autoComplete:"off",onSubmit:d,children:[(0,t.jsx)(p.b,{variant:"error",onClose:function(){l(f)},children:a.type===c.MV&&a.message}),(0,t.jsxs)(o.Z,{spacing:3,children:[(0,t.jsx)(s.HH,{customInput:h.Ib,format:"+998 (##) ###-##-##",allowEmptyFormatting:!0,mask:"_",name:"phone_number",autoFocus:!0}),(0,t.jsx)(b.zx,{block:!0,disabled:g,type:"submit",variant:"primary","aria-label":n("sign-in-drawer.submit-button"),children:n("sign-in-drawer.submit-button")}),(0,t.jsx)(o.Z,{direction:"row",spacing:3,justifyContent:"space-between",alignItems:"center",children:(0,t.jsx)(b.zx,{block:!0,variant:"secondary",onClick:x,"aria-label":n("sign-in-drawer.sign-in-via-code-or-qr-code"),children:n("sign-in-drawer.sign-in-via-code-or-qr-code")})}),(0,t.jsx)(m.F,{})]})]})}})]})}}}]);